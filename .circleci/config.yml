version: 2
jobs:
#  build:
#    docker:
#      - image: circleci/<language>:<version TAG>
#    steps:
#      - checkout
#      - run: <command>
  test:
    working_directory: ~/repo
    docker:
      - image: theasp/clojurescript-nodejs:shadow-cljs
    steps:
      - checkout
      - restore_cache:
        keys:
          - v1-dependencies-{{ checksum "package.json" }}
          - v1-dependencies-
      - run: npm install
      - save_cache:
        paths:
          - node_modules
        key: v1-dependencies-{{ checksum "package.json" }}
      - run: npm test
workflows:
  version: 2
  build_and_test:
    jobs:
#      - build
      - test
